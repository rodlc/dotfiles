#!/bin/zsh
# Pre-commit hook: Remind to save dotfiles changes
# Warns if dotfiles has uncommitted or unpushed changes

DOTFILES_DIR="$HOME/Code/rodlc/dotfiles"

# Only run if we're NOT in the dotfiles repo (avoid recursion)
if [ "$PWD" != "$DOTFILES_DIR" ] && [ -d "$DOTFILES_DIR/.git" ]; then
  cd "$DOTFILES_DIR"

  # Check if there are any changes (uncommitted or unpushed)
  if ! git diff-index --quiet HEAD -- 2>/dev/null || \
     [ -n "$(git log origin/master..HEAD 2>/dev/null)" ]; then
    echo ""
    echo "⚠️  Dotfiles has unsaved changes!"
    echo "   cd ~/Code/rodlc/dotfiles && git add -A && git commit -m \"Update\" && git push"
    echo ""
  fi
fi

exit 0
